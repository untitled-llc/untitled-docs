---
id: canopy-environments
title: Canopy Environments
sidebar_label: Environments
slug: /canopy/environments
---

## AWS us-east-2

#### Amplify

**Github Repo:** https://github.com/Canopy-Certified-Inc/portal-front-end
  - Master Environment
    - Front End
      - CI/CD. **This will rebuild if you merge any changes into the master
        branch.**
      - URL: [https://portal.canopyky.org/login](https://portal.canopyky.org/login)
    - Back End
      - Cognito
        - 1 UserPool
          - **Resource name:** `canopyUsers-src`
      - DynamoDB
        - Three tables
          - `Cognito-users`
            - User and status information
          - `forms-src`
            - Holds each companies form and the version of the form entry
          - `forms-points`
            - Holds point values for all forms that allow points
      - Lambdas
        - `Cognito_to_dynamodb`
          - Adds to conginto users in dynamo. Adds them to cognito pool.
            Creates salesforce account.
        - `modify_contacts`
          - Add, delete or modify the users on the cognito users table in
            dynamo and updates to cognito pool
            - **Note:** deletion is just a flag in dynamo db. We do not delete
              user data.
        - `canopyUsersPostConfirmation-src`
          - Autogenerated from amplify.
          - Hit after authorization to trigger `Cognito_to_dynamodb` lambda.
        - `Attachment_files_dynamo_to_s3`
          - After the forms enter dynamo this grabs list of forms attachments and put that in s3
        - `preSignup`
          - **WIP:** On signup check is company exists in dynamo first. If so
            then throw an error. 
        - `points_table`
          - Hit by all forms with points. Adds up total points and checks for
            imporovement points. Adds this to the `forms-points` table in Dynamo
        - `track_learning_modules_progress`
          - Hit when someone submits a learning module form and updates that
            users learning module progress in the Cognito users table.
  - Development Environment
    - Same as master
    - Front End
      - CI/CD. **This will rebuild if you merge any changes into the master**
      - URL: [https://dev.d2yyb34ilmrjls.amplifyapp.com/](https://dev.d2yyb34ilmrjls.amplifyapp.com/)
    - Back End
      - Cognito
        - 1 UserPool
          - **Resource name:** `canopyUsers-dev`
      - Dynamo
        - Two tables
          - `Cognito-users-dev`
          - `forms-dev`
      - Lambdas
        - `Cognito_to_dynamodb_dev`
        - `preSignup`
        - `canopyUsersPostConfirmation-dev`
#### AppSync
  - prod
    - User API: `portalUsers`
  - dev
    - User API: `portalUsers-dev`
#### Route53
  - Domain
#### CloudWatch
  - Log groups can be found here: https://us-east-2.console.aws.amazon.com/cloudwatch/home?region=us-east-2#logsV2:log-groups
#### IAM
  - 
#### API Gateway
  - `FormAssembly_Con`
    - `/cognito-users`
    - `/forms`
    - `/points`
  - `DynamoFrontend`
#### S3
  - Learning Modules
    - `canopy-web-content`
  - Form Attachments
    - `canopy-form-attachments122159-src`
#### Salesforce
  - Accounts
  - Contacts
  - Initial Onboarding Forms
  - Minimum Requirements
  - Yearly Requirements
  - Elective Pools
  - Self Reportings
  - Canopy Culture Surveys
  - Learning Modules
  - Orientation First Login
#### FormAssembly
  - Base forms
  - Read-only forms
  - Learning Modules

